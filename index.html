<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
        />
        <title>Video to photo capture</title>
        <link rel="stylesheet" href="src/style.css" />
    </head>
    <body style="user-select: none">
        <header>
            <a class="logo" href="#">
                <img
                    width="48"
                    height="48"
                    src="src/assets/logo.png"
                    alt="Logo"
                />
                <span class="logo-name">Video to <em>photo capture</em></span>
            </a>
            <div class="header-spacer"></div>
            <button
                id="theme-toggle"
                class="btn-theme"
                title="Toggle light / dark theme"
                aria-label="Toggle theme"
            >
                <!-- Moon: shown in dark mode -->
                <svg
                    class="icon-moon"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                >
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
                </svg>
                <!-- Sun: shown in light mode -->
                <svg
                    class="icon-sun"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                >
                    <circle cx="12" cy="12" r="5" />
                    <line x1="12" y1="1" x2="12" y2="3" />
                    <line x1="12" y1="21" x2="12" y2="23" />
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
                    <line x1="1" y1="12" x2="3" y2="12" />
                    <line x1="21" y1="12" x2="23" y2="12" />
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
                </svg>
            </button>
        </header>

        <main>
            <!-- ── Upload zone ─────────────────────────────────── -->
            <section id="upload-section">
                <div
                    id="drop-zone"
                    role="button"
                    tabindex="0"
                    aria-label="Upload video file"
                >
                    <div class="upload-icon-wrap">
                        <svg viewBox="0 0 24 24">
                            <polyline points="16 16 12 12 8 16" />
                            <line x1="12" y1="12" x2="12" y2="21" />
                            <path
                                d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"
                            />
                        </svg>
                    </div>
                    <p class="drop-title">Drop your video here</p>
                    <p class="drop-sub">or click to browse</p>
                    <p class="drop-formats">MP4 · WebM · MOV · AVI · MKV</p>
                    <input
                        type="file"
                        id="file-input"
                        accept="video/*"
                        hidden
                    />
                </div>
            </section>

            <!-- ── Player ──────────────────────────────────────── -->
            <section id="player-section" hidden>
                <div class="player-layout">
                    <!-- Video -->
                    <div class="video-wrapper">
                        <video
                            id="video"
                            preload="metadata"
                            crossorigin="anonymous"
                        ></video>
                        <canvas id="canvas" hidden></canvas>
                        <div id="video-overlay" class="video-overlay" hidden>
                            <span id="overlay-text"></span>
                        </div>
                    </div>

                    <!-- Controls panel -->
                    <div class="controls-panel">
                        <!-- Back + filename -->
                        <div class="panel-section info-bar">
                            <button
                                id="change-btn"
                                class="btn-back"
                                title="Load a different video"
                            >
                                <svg
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2.2"
                                    width="14"
                                    height="14"
                                >
                                    <polyline points="15 18 9 12 15 6" />
                                </svg>
                                Back
                            </button>
                            <span id="filename-label" class="filename"></span>
                        </div>

                        <!-- Seek + frame info -->
                        <div class="panel-section seek-section">
                            <div class="seek-row">
                                <span id="current-time" class="time-label"
                                    >0:00.000</span
                                >
                                <input
                                    type="range"
                                    id="seek-bar"
                                    min="0"
                                    max="1000"
                                    value="0"
                                    step="1"
                                    class="seek-bar"
                                    aria-label="Seek"
                                />
                                <span id="duration-label" class="time-label"
                                    >0:00.000</span
                                >
                            </div>
                            <div
                                id="current-frame-info"
                                class="frame-info"
                            ></div>
                        </div>

                        <!-- Playback -->
                        <div class="panel-section btn-row">
                            <button
                                id="prev-frame-btn"
                                class="btn-icon"
                                title="Previous frame (←)"
                            >
                                <svg
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                >
                                    <polyline points="11 17 6 12 11 7" />
                                    <polyline points="18 17 13 12 18 7" />
                                </svg>
                            </button>
                            <button
                                id="play-btn"
                                class="btn-icon btn-play"
                                title="Play / Pause (Space)"
                            >
                                <svg
                                    id="play-icon"
                                    viewBox="0 0 24 24"
                                    fill="currentColor"
                                >
                                    <polygon points="5 3 19 12 5 21 5 3" />
                                </svg>
                                <svg
                                    id="pause-icon"
                                    viewBox="0 0 24 24"
                                    fill="currentColor"
                                    hidden
                                >
                                    <rect x="6" y="4" width="4" height="16" />
                                    <rect x="14" y="4" width="4" height="16" />
                                </svg>
                            </button>
                            <button
                                id="next-frame-btn"
                                class="btn-icon"
                                title="Next frame (→)"
                            >
                                <svg
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                >
                                    <polyline points="13 17 18 12 13 7" />
                                    <polyline points="6 17 11 12 6 7" />
                                </svg>
                            </button>
                        </div>

                        <!-- Actions -->
                        <div class="panel-section action-row">
                            <button id="preview-btn" class="btn-preview">
                                <svg
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    width="16"
                                    height="16"
                                >
                                    <path
                                        d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"
                                    />
                                    <circle cx="12" cy="12" r="3" />
                                </svg>
                                Preview
                            </button>
                            <button id="download-btn" class="btn-capture">
                                <svg
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    width="16"
                                    height="16"
                                >
                                    <path
                                        d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"
                                    />
                                    <polyline points="7 10 12 15 17 10" />
                                    <line x1="12" y1="15" x2="12" y2="3" />
                                </svg>
                                Save Frame
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ── Preview modal ───────────────────────────────── -->
            <div
                id="preview-modal"
                class="preview-modal"
                hidden
                role="dialog"
                aria-modal="true"
                aria-label="Frame preview"
            >
                <div class="preview-backdrop"></div>
                <div class="preview-shell">
                    <!-- Toolbar -->
                    <div class="preview-toolbar">
                        <div class="preview-toolbar-left">
                            <span
                                id="preview-timestamp"
                                class="preview-meta"
                            ></span>
                            <span
                                id="preview-resolution"
                                class="preview-meta muted"
                            ></span>
                        </div>
                        <div class="preview-toolbar-right">
                            <button
                                id="zoom-out-btn"
                                class="ptb-btn"
                                title="Zoom out (-)"
                            >
                                <svg
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    width="14"
                                    height="14"
                                >
                                    <circle cx="11" cy="11" r="8" />
                                    <line
                                        x1="21"
                                        y1="21"
                                        x2="16.65"
                                        y2="16.65"
                                    />
                                    <line x1="8" y1="11" x2="14" y2="11" />
                                </svg>
                            </button>
                            <span id="zoom-label" class="zoom-label">100%</span>
                            <button
                                id="zoom-in-btn"
                                class="ptb-btn"
                                title="Zoom in (+)"
                            >
                                <svg
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    width="14"
                                    height="14"
                                >
                                    <circle cx="11" cy="11" r="8" />
                                    <line
                                        x1="21"
                                        y1="21"
                                        x2="16.65"
                                        y2="16.65"
                                    />
                                    <line x1="11" y1="8" x2="11" y2="14" />
                                    <line x1="8" y1="11" x2="14" y2="11" />
                                </svg>
                            </button>
                            <button
                                id="zoom-fit-btn"
                                class="ptb-btn"
                                title="Fit to screen (0)"
                            >
                                <svg
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    width="14"
                                    height="14"
                                >
                                    <path d="M8 3H5a2 2 0 0 0-2 2v3" />
                                    <path d="M21 8V5a2 2 0 0 0-2-2h-3" />
                                    <path d="M3 16v3a2 2 0 0 0 2 2h3" />
                                    <path d="M16 21h3a2 2 0 0 0 2-2v-3" />
                                </svg>
                            </button>
                            <button
                                id="zoom-actual-btn"
                                class="ptb-btn"
                                title="Actual size (1)"
                            >
                                1:1
                            </button>
                            <div class="ptb-divider"></div>
                            <button
                                id="preview-download-btn"
                                class="ptb-btn ptb-dl"
                                title="Save frame"
                            >
                                <svg
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    width="14"
                                    height="14"
                                >
                                    <path
                                        d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"
                                    />
                                    <polyline points="7 10 12 15 17 10" />
                                    <line x1="12" y1="15" x2="12" y2="3" />
                                </svg>
                                Save
                            </button>
                            <button
                                id="preview-close-btn"
                                class="ptb-btn ptb-close"
                                title="Close (Esc)"
                            >
                                <svg
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    width="16"
                                    height="16"
                                >
                                    <line x1="18" y1="6" x2="6" y2="18" />
                                    <line x1="6" y1="6" x2="18" y2="18" />
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Stage -->
                    <div class="preview-stage" id="preview-stage">
                        <img
                            id="preview-img"
                            class="preview-img"
                            alt="Frame preview"
                            draggable="false"
                        />
                    </div>

                    <!-- Hint -->
                    <div class="preview-hint">
                        Scroll to zoom &nbsp;·&nbsp; Drag to pan &nbsp;·&nbsp;
                        Double-click to reset
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <div class="footer-dot"></div>
            <span class="footer-text"
                >All processing is local — your video never leaves this
                device.</span
            >
        </footer>

        <script type="module" src="src/script.ts"></script>
    </body>
</html>
